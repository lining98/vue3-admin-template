import{J as b,d as Y,r as i,a as Z,G as F,e as n,K as M,o as _,c as V,b as e,w as o,B as v,v as h,h as T,m as z,L as u,_ as ee}from"./index-a15cff6e.js";const ae=(d,s)=>b.get(`/admin/product/baseTrademark/${d}/${s}`),te=d=>d.id?b.put("/admin/product/baseTrademark/update",d):b.post("/admin/product/baseTrademark/save",d),le=d=>b.delete("/admin/product/baseTrademark/remove/"+d),oe=["src"],re=["src"],ne={class:"dialog-footer"},se=Y({__name:"index",setup(d){const s=i(1),k=i(5),C=i(0),y=i([]),x=i(!1),p=async(t=1)=>{s.value=t,x.value=!0;const a=await ae(s.value,k.value);a.code===200&&(C.value=a.data.total,y.value=a.data.records,x.value=!1)},O=()=>{p()},g=i(),c=i(!1),l=Z({tmName:"",logoUrl:""}),P={tmName:[{required:!0,min:2,message:"品牌名称位数大于等于两位",trigger:"blur"}],logoUrl:[{required:!0,message:"请选择品牌logo",trigger:"change"}]},N=()=>{var t;(t=g.value)==null||t.clearValidate(),c.value=!0},q=()=>{l.id=0,l.tmName="",l.logoUrl="",N()},D=t=>{N(),Object.assign(l,t)},G=async t=>{(await le(t)).code===200?(u.success("删除品牌成功"),p(y.value.length>1?s.value:s.value-1)):u.error("删除品牌失败")},$=async()=>{await g.value.validate(),(await te(l)).code===200?(u.success(l.id?"修改品牌成功！":"添加品牌成功！"),c.value=!1,p(l.id?s.value:1)):(u.error(l.id?"修改品牌失败！":"添加品牌成功！"),c.value=!1)},B=(t,a)=>{l.logoUrl=URL.createObjectURL(a.raw),g.value.clearValidate("logoUrl")},L=t=>{if(t.type=="image/jpeg"||t.type=="image/png"||t.type=="image/git"){if(t.size/1024/1024<4)return!0;u.error("上传文件大小应小于4M")}else return u.error("上传文件格式务必为PNG|JPG|GIF"),!1};return F(()=>{p()}),(t,a)=>{const m=n("el-button"),f=n("el-table-column"),j=n("el-popconfirm"),R=n("el-table"),A=n("el-pagination"),E=n("el-card"),S=n("el-input"),w=n("el-form-item"),H=n("Plus"),I=n("el-icon"),J=n("el-upload"),K=n("el-form"),Q=n("el-dialog"),U=M("has"),W=M("loading");return _(),V("div",null,[e(E,{class:"box-card"},{default:o(()=>[v((_(),h(m,{type:"primary",icon:"Plus",onClick:q},{default:o(()=>[T("添加品牌")]),_:1})),[[U,"btn.Trademark.add"]]),v((_(),h(R,{data:y.value,style:{width:"100%",margin:"10px 0"},border:""},{default:o(()=>[e(f,{label:"序号",width:"80",align:"center",type:"index"}),e(f,{label:"品牌名称",prop:"tmName"}),e(f,{label:"品牌LOGO"},{default:o(r=>[z("img",{style:{width:"100px",height:"100px"},src:r.row.logoUrl,alt:""},null,8,oe)]),_:1}),e(f,{label:"操作"},{default:o(({row:r,index:de})=>[v(e(m,{type:"primary",icon:"Edit",onClick:X=>D(r)},null,8,["onClick"]),[[U,"btn.Trademark.update"]]),e(j,{title:`您确定要删除${r.tmName}吗？`,icon:"Delete",width:"200px",onConfirm:X=>G(r.id)},{reference:o(()=>[v(e(m,{type:"danger",icon:"Delete"},null,512),[[U,"btn.Trademark.remove"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"])),[[W,x.value]]),e(A,{"current-page":s.value,"onUpdate:currentPage":a[0]||(a[0]=r=>s.value=r),"page-size":k.value,"onUpdate:pageSize":a[1]||(a[1]=r=>k.value=r),"page-sizes":[5,10,15,20],background:"",layout:" prev, pager, next, jumper,->, sizes,total",total:C.value,onSizeChange:O,onCurrentChange:p},null,8,["current-page","page-size","total"])]),_:1}),e(Q,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=r=>c.value=r),title:l.id?"修改品牌":"添加品牌"},{footer:o(()=>[z("span",ne,[e(m,{onClick:a[3]||(a[3]=r=>c.value=!1)},{default:o(()=>[T("取消")]),_:1}),e(m,{type:"primary",onClick:$},{default:o(()=>[T("确认")]),_:1})])]),default:o(()=>[e(K,{model:l,rules:P,ref_key:"formRef",ref:g,style:{width:"80%"},"label-width":"100px"},{default:o(()=>[e(w,{label:"品牌名称",prop:"tmName"},{default:o(()=>[e(S,{modelValue:l.tmName,"onUpdate:modelValue":a[2]||(a[2]=r=>l.tmName=r),modelModifiers:{trim:!0},placeholder:"请您输入品牌名称"},null,8,["modelValue"])]),_:1}),e(w,{label:"品牌LOGO",prop:"logoUrl"},{default:o(()=>[e(J,{class:"avatar-uploader",action:"/api/admin/product/fileUpload","show-file-list":!1,"on-success":B,"before-upload":L},{default:o(()=>[l.logoUrl?(_(),V("img",{key:0,src:l.logoUrl,class:"avatar"},null,8,re)):(_(),h(I,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[e(H)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const ce=ee(se,[["__scopeId","data-v-28c02a79"]]);export{ce as default};
